import{P as n,j as e,u as M,r as l,f as P,a as q,M as T,O as N}from"./index-Bt4Cxn2F.js";import{I as w}from"./index-BoPVD4Ny.js";import{M as E}from"./More-T39HuG87.js";const Q="_form_1m1zq_1",k="_label_1m1zq_13",y={form:Q,label:k},$="_input_svg1p_1",z={input:$},d=({type:o,id:a,placeholder:i,children:r})=>e.jsx("input",{className:z.input,type:o,id:a,placeholder:i,children:r});d.propTypes={type:n.string,id:n.string,placeholder:n.string,children:n.node};const A="_btn_fql60_1",C={btn:A},x=({type:o,children:a})=>e.jsx("button",{className:C.btn,type:o,children:a});x.propTypes={type:n.string,children:n.node};const j=({query:o,onSubmit:a})=>{const i=r=>{r.preventDefault();const c=r.target.searchInput.value;if(c.trim()===""){alert("Please enter what you are looking for!");return}const m=c.split(" ").join("+");a(m),r.currentTarget.reset()};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:i,className:y.form,children:[e.jsx("span",{className:y.label,children:"Search for movies:"}),e.jsx(d,{type:"text",id:"searchInput",name:"searchInput",value:o,placeholder:"enter part of title"}),e.jsx(x,{type:"submit",children:e.jsx(w,{})})]})})};j.propTypes={query:n.string,onSubmit:n.func};const t={query:"",movies:[],page:1,error:"",more:!1},B=()=>{const[o,a]=M(),[i,r]=l.useState(t.movies),[c,m]=l.useState(t.page),[S,p]=l.useState(t.more),[f,h]=l.useState(t.error),u=o.get("query")??"",b=()=>{r(t.movies),m(t.page),p(t.more),h(t.error)},v=s=>{a(s!==""?{query:s}:{}),b()};l.useEffect(()=>{P(u,c).then(({results:s,total_pages:g})=>{if(s.length===0){p(!1),h(`Sorry, there are no movies matching '${u}'. Please try again.`);return}r(I=>[...I,...s]),p(g>c)}).catch(s=>h(s.message))},[u,c]);const _=()=>{m(s=>s+1)};return e.jsxs("main",{children:[e.jsx(q,{children:e.jsx(j,{value:u,onSubmit:v})}),f&&e.jsx("p",{children:f.message}),u&&e.jsx(T,{movies:i}),S&&e.jsx(E,{onClick:_}),e.jsx(N,{})]})};export{B as MoviesLayout};
